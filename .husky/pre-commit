#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Get list of staged files
STAGED_FILES=$(git diff --cached --name-only)

echo "🔍 Checking staged files..."
echo "$STAGED_FILES" | head -5

# Only run validation if YAML files in data/ directory were changed
if echo "$STAGED_FILES" | grep -E "^data/.*\.(yml|yaml)$"; then
  echo "📋 Data YAML files changed - running validation..."
  npm test
else
  echo "✅ No data YAML files changed - skipping validation"
fi
